<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>(^_^)</title>

<style>
    :root {
        --fg: #111;
        --bg: #fff;
        --muted: #888;
    }

    body {
        margin: 2rem;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        color: var(--fg);
        background: var(--bg);
        max-width: 720px;
    }

    nav {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        font-size: 0.9rem;
    }

    .disp {
        font-weight: 600;
        margin-right: auto;
    }

    a {
        color: inherit;
        text-decoration: none;
    }

    a:hover {
        text-decoration: underline;
    }

    #content {
        white-space: pre-wrap;
        line-height: 1.6;
    }

    footer {
        margin-top: 3rem;
        font-size: 0.8rem;
        color: var(--muted);
    }

    input, button {
        font: inherit;
        margin-right: .5rem;
    }
</style>
</head>

<body>
<nav>
    <span class="disp">raster</span>
    <a href="/about">about</a>
    <a href="/work">work</a>
    <a href="/blog">blog</a>
    <a href="/contact">contact</a>
    <a href="/now">now</a>
</nav>

<!-- injected content goes here -->
<main id="content"></main>

<footer>
    <input type="file" id="fileInput" accept=".txt,.md">
    <button onclick="exportHTML()">export html</button>
</footer>

<script>
/* extremely tiny markdown support */
function mdToHtml(md) {
    return md
        .replace(/^### (.*$)/gim, "<h3>$1</h3>")
        .replace(/^## (.*$)/gim, "<h2>$1</h2>")
        .replace(/^# (.*$)/gim, "<h1>$1</h1>")
        .replace(/\*\*(.*?)\*\*/gim, "<strong>$1</strong>")
        .replace(/\*(.*?)\*/gim, "<em>$1</em>")
        .replace(/\n$/gim, "<br>");
}

const contentEl = document.getElementById("content");

document.getElementById("fileInput").addEventListener("change", e => {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = () => {
        const text = reader.result;
        contentEl.innerHTML =
            file.name.endsWith(".md") ? mdToHtml(text) : text;
    };
    reader.readAsText(file);
});

function exportHTML() {
    const html = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>(^_^)</title>
</head>
<body>
${document.documentElement.innerHTML}
</body>
</html>`;

    const blob = new Blob([html], { type: "text/html" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "index.html";
    a.click();
}
</script>

<script data-collect-dnt="true" async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
<noscript>
<img src="https://queue.simpleanalyticscdn.com/noscript.gif?collect-dnt=true"
     alt="" referrerpolicy="no-referrer-when-downgrade"/>
</noscript>
</body>
</html>
